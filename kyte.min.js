/**
    * Copyright 2020-2023 KeyQ, Inc.
    * 
    * This source file is free software,
    * available under the following license:
    * MIT license
    * 
    * This source file is distributed in the hope that
    * it will be useful, but WITHOUT ANY WARRANTY;
    * without even the implied warranty of MERCHANTABILITY
    * or FITNESS FOR A PARTICULAR PURPOSE.
    * See the license files for details.
    * 
    * For details please refer to: http://www.keyq.cloud
    * KyteJS
    * Â©2020-2023 KeyQ, Inc.
    **/
class Kyte{static VERSION="1.0.18";constructor(e,t,i,a,s=null){this.url=e,this.access_key=t,this.identifier=i,this.account_number=a,this.applicationId=s,this.initial_access_key=t,this.initial_identifier=i,this.initial_account_number=a,this.txToken,this.sessionToken,this.dateFormat="mm/dd/yy",this.sessionCrossDomain=!1}init(){this.access_key=this.getCookie("kyte_pub")?this.getCookie("kyte_pub"):this.access_key,this.identifier=this.getCookie("kyte_iden")?this.getCookie("kyte_iden"):this.identifier,this.account_number=this.getCookie("kyte_num")?this.getCookie("kyte_num"):this.account_number,this.txToken=this.getCookie("txToken")?this.getCookie("txToken"):0,this.sessionToken=this.getCookie("sessionToken")?this.getCookie("sessionToken"):0}apiVersion(e,t=null){$.ajax({method:"GET",crossDomain:!0,dataType:"json",url:this.url,success:function(t){"function"==typeof e?e(t.engine_version,t.framework_version):console.log("Engine: "+t.engine_version+"; Framework: "+t.framework_version)},error:function(e){"function"==typeof t?t(e.responseJSON.error):console.error(e.responseJSON.error)}})}sign(e,t=null){var i=new Date;$.ajax({method:"POST",crossDomain:!0,dataType:"json",url:this.url,data:"key="+this.access_key+"&identifier="+this.identifier+"&token="+this.txToken+"&time="+i.toUTCString(),success:function(t){"function"==typeof e?e(t,i):console.log(t)},error:function(e){"function"==typeof t?t(e):console.error(e)}})}sendData(e,t,i=null,a=null,s=null,l=null,o=[],n,d=null){var r=this;r.getCookie("kyte-token")&&r.getCookie("kyte-token"),this.sign(function(c,u){let h=encodeURIComponent(btoa(r.access_key+"%"+r.sessionToken+"%"+u.toUTCString()+"%"+r.account_number));var m=r.url+"/"+t;i&&(m+="/"+i),a&&(m+="/"+a);var f="";s&&(f+=$.param(s)),l&&(f&&(f+="&"),f+=l),$.ajax({method:e,crossDomain:!0,dataType:"json",url:m,beforeSend:function(e){if(e.setRequestHeader("x-kyte-signature",c.signature),e.setRequestHeader("x-kyte-identity",h),r.applicationId&&e.setRequestHeader("x-kyte-appid",r.applicationId),e.setRequestHeader("x-kyte-device",window.navigator.userAgent),o.length>0)for(let t of o)e.setRequestHeader(t.name,t.value)},data:f,success:function(e){e.syntax_error&&r.syntaxErrorBanner(e.syntax_error),r.txToken=e.token,r.sessionToken=e.session,e.kyte_pub&&e.kyte_iden&&e.kyte_num?(r.access_key=e.kyte_pub,r.identifier=e.kyte_iden,r.account_number=e.kyte_num,r.setCookie("kyte_pub",r.access_key,60,r.sessionCrossDomain),r.setCookie("kyte_iden",r.identifier,60,r.sessionCrossDomain),r.setCookie("kyte_num",r.account_number,60,r.sessionCrossDomain)):(r.setCookie("kyte_pub","",-1),r.setCookie("kyte_num","",-1),r.setCookie("kyte_iden","",-1),r.access_key=r.initial_access_key,r.identifier=r.initial_identifier,r.account_number=r.initial_account_number),e.token||e.session?(r.setCookie("txToken",r.txToken,60,r.sessionCrossDomain),r.setCookie("sessionToken",r.sessionToken,60,r.sessionCrossDomain),r.setCookie("accountIdx",e.account_id,60,r.sessionCrossDomain),r.setCookie("roleIdx",e.role?e.role.id:0,60,r.sessionCrossDomain),r.setCookie("roleName",e.role?e.role.name:null,60,r.sessionCrossDomain)):(r.setCookie("txToken","",-1),r.setCookie("sessionToken","",-1),r.setCookie("accountIdx","",-1),r.setCookie("roleIdx","",-1),r.setCookie("roleName","",-1),r.setCookie("kyte_pub","",-1),r.setCookie("kyte_num","",-1),r.setCookie("kyte_iden","",-1),r.access_key=r.initial_access_key,r.identifier=r.initial_identifier,r.account_number=r.initial_account_number),"function"==typeof n?n(e):console.log(e)},error:function(e){e.syntax_error&&r.syntaxErrorBanner(e.syntax_error),403==e.status?(r.setCookie("txToken","",-1),r.setCookie("sessionToken","",-1),r.setCookie("accountIdx","",-1),r.setCookie("roleIdx","",-1),r.setCookie("roleName","",-1)):null!=e.responseJSON&&(r.txToken=e.responseJSON.token,r.sessionToken=e.responseJSON.session,e.kyte_pub&&e.kyte_iden&&e.kyte_num?(r.access_key=e.kyte_pub,r.identifier=e.kyte_iden,r.account_number=e.kyte_num,r.setCookie("kyte_pub",r.access_key,60,r.sessionCrossDomain),r.setCookie("kyte_iden",r.identifier,60),r.sessionCrossDomain,r.setCookie("kyte_num",r.account_number,60,r.sessionCrossDomain)):(r.setCookie("kyte_pub","",-1),r.setCookie("kyte_num","",-1),r.setCookie("kyte_iden","",-1),r.access_key=r.initial_access_key,r.identifier=r.initial_identifier,r.account_number=r.initial_account_number),e.responseJSON.token||e.responseJSON.session?(r.setCookie("txToken",r.txToken,60,r.sessionCrossDomain),r.setCookie("sessionToken",r.sessionToken,60,r.sessionCrossDomain),r.setCookie("accountIdx",e.account_id,60,r.sessionCrossDomain),r.setCookie("roleIdx",e.role?e.role.id:0,60,r.sessionCrossDomain),r.setCookie("roleName",e.role?e.role.name:null,60,r.sessionCrossDomain)):(r.setCookie("txToken","",-1),r.setCookie("sessionToken","",-1),r.setCookie("accountIdx","",-1),r.setCookie("roleIdx","",-1),r.setCookie("roleName","",-1),r.setCookie("kyte_pub","",-1),r.setCookie("kyte_num","",-1),r.setCookie("kyte_iden","",-1),r.access_key=r.initial_access_key,r.identifier=r.initial_identifier,r.account_number=r.initial_account_number)),null==e.responseJSON?console.log(e):"function"==typeof d?d(e.responseJSON.error):console.error(e.responseJSON.error)}})},function(e){null==e.responseJSON?console.error(e):"function"==typeof d?d(e):console.error(e)})}post(e,t=null,i=null,a=[],s,l=null){this.sendData("POST",e,null,null,t,i,a,s,l)}put(e,t=null,i=null,a=null,s=null,l=[],o,n=null){this.sendData("PUT",e,t,i,a,s,l,o,n)}get(e,t=null,i=null,a=[],s,l=null){this.sendData("GET",e,t,i,null,null,a,s,l)}delete(e,t=null,i=null,a=[],s,l=null){this.sendData("DELETE",e,t,i,null,null,a,s,l)}setCookie(e,t,i=null,a=!1){var s="";if(i){var l=new Date;l.setTime(l.getTime()+6e4*i),s=";expires="+l.toUTCString()}let o=window.location.hostname.split("."),n="";a&&(o.length>2?n="domain="+o.slice(1).join(".")+";":2==o.length&&(n="domain="+o.joing(".")+";")),document.cookie=e+"="+t+s+";path=/;"+n+("https:"===location.protocol?"secure;":"")}getCookie(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var s=i[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}getUrlHash(){return location.hash}getUrlParameter(e){var t,i,a=window.location.search.substring(1).split("&");for(i=0;i<a.length;i++)if((t=a[i].split("="))[0]===e)return void 0!==t[1]&&decodeURIComponent(t[1]);return!1}getPageRequest(){let e=this.getUrlParameter("request");return e?JSON.parse(decodeURIComponent(atob(e))):null}setPageRequest(e,t){return encodeURIComponent(btoa(JSON.stringify({model:e,value:t})))}initSpinner(e){e.append('<div id="pageLoaderModal" class="modal" style="background: white; opacity: 0.6;" data-backdrop="static" data-keyboard="false" tabindex="-1"><div class="modal-dialog modal-sm h-100 d-flex"><div class="mx-auto align-self-center" style="width: 48px"><div class="spinner-wrapper text-center fa-6x"><span class="fas fa-sync fa-spin"></span></div></div></div></div>')}startSpinner(){$("#pageLoaderModal").modal()}stopSpinner(){$("#pageLoaderModal").modal("hide")}sessionCreate(e,t,i=null,a="Session"){var s=this;this.post(a,e,null,[],function(e){s.txToken=e.token,s.sessionToken=e.session,s.setCookie("txToken",s.txToken,60,s.sessionCrossDomain),s.setCookie("sessionToken",s.sessionToken,60,s.sessionCrossDomain),s.setCookie("accountIdx",e.account_id,60,s.sessionCrossDomain),s.setCookie("roleIdx",e.role?e.role.id:0,60,s.sessionCrossDomain),s.setCookie("roleName",e.role?e.role.name:null,60,s.sessionCrossDomain),s.access_key=e.kyte_pub,s.identifier=e.kyte_iden,s.account_number=e.kyte_num,s.setCookie("kyte_pub",s.access_key,60,s.sessionCrossDomain),s.setCookie("kyte_iden",s.identifier,60,s.sessionCrossDomain),s.setCookie("kyte_num",s.account_number,60,s.sessionCrossDomain),"function"==typeof t?t(e):console.log(e)},function(e){s.setCookie("txToken","",-1),s.setCookie("sessionToken","",-1),s.setCookie("accountIdx","",-1),s.setCookie("roleIdx","",-1),s.setCookie("roleName","",-1),s.setCookie("kyte_pub","",-1),s.setCookie("kyte_num","",-1),s.setCookie("kyte_iden","",-1),s.access_key=s.initial_access_key,s.identifier=s.initial_identifier,s.account_number=s.initial_account_number,"function"==typeof i?i(e):console.error(e)})}addLogoutHandler(e){self=this,$("body").on("click",e,function(){self.sessionDestroy(function(){location.href="/"})})}checkSession(){return(0==this.sessionToken||"0"==this.sessionToken)&&(this.setCookie("sessionToken","",-1),this.setCookie("kyte_pub","",-1),this.setCookie("kyte_num","",-1),this.setCookie("kyte_iden","",-1),this.access_key=this.initial_access_key,this.identifier=this.initial_identifier,this.account_number=this.initial_account_number),(0==this.txToken||"0"==this.txToken)&&(this.setCookie("txToken","",-1),this.setCookie("kyte_pub","",-1),this.setCookie("kyte_num","",-1),this.setCookie("kyte_iden","",-1),this.access_key=this.initial_access_key,this.identifier=this.initial_identifier,this.account_number=this.initial_account_number),this.sessionToken&&this.txToken||(this.setCookie("txToken","",-1),this.setCookie("sessionToken","",-1),this.setCookie("kyte_pub","",-1),this.setCookie("kyte_num","",-1),this.setCookie("kyte_iden","",-1),this.access_key=this.initial_access_key,this.identifier=this.initial_identifier,this.account_number=this.initial_account_number),!!this.getCookie("sessionToken")}isSession(){let e=this;return setInterval(function(){e.checkSession()||(window.location.href="/")},3e4),this.checkSession()}sessionDestroy(e=null){var t=this;this.delete("Session",null,null,[],function(i){t.setCookie("txToken","",-1),t.setCookie("sessionToken","",-1),t.setCookie("accountIdx","",-1),t.setCookie("roleIdx","",-1),t.setCookie("roleName","",-1),t.setCookie("kyte_pub","",-1),t.setCookie("kyte_num","",-1),t.setCookie("kyte_iden","",-1),t.access_key=t.initial_access_key,t.identifier=t.initial_identifier,t.account_number=t.initial_account_number,"function"==typeof e?e(i):console.error(i)},function(i){t.setCookie("txToken","",-1),t.setCookie("sessionToken","",-1),t.setCookie("accountIdx","",-1),t.setCookie("roleIdx","",-1),t.setCookie("roleName","",-1),t.setCookie("kyte_pub","",-1),t.setCookie("kyte_num","",-1),t.setCookie("kyte_iden","",-1),t.access_key=t.initial_access_key,t.identifier=t.initial_identifier,t.account_number=t.initial_account_number,"function"==typeof e?e(i):console.error(i)})}makeid(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=i.length,s=0;s<e;s++)t+=i.charAt(Math.floor(Math.random()*a));return t}alert(e,t,i=null){this.makeid(5),$("<div></div>").appendTo("body").html("<div><h6>"+t+"</h6></div>").dialog({modal:!0,title:e,zIndex:1e4,autoOpen:!0,width:"auto",resizeable:!1,buttons:{OK:function(){"function"==typeof i&&i(),$(this).dialog("close")}},close:function(e,t){$(this).remove()}})}confirm(e,t,i=null,a=null){this.makeid(5),$("<div></div>").appendTo("body").html("<div><h6>"+t+"</h6></div>").dialog({modal:!0,title:e,zIndex:1e4,autoOpen:!0,width:"auto",resizeable:!1,buttons:[{class:"btn btn-danger btn-delete-confirm-yes",text:"Yes",click:function(){"function"==typeof i&&i(),$(this).dialog("close")}},{class:"btn btn-secondary btn-delete-confirm-no",text:"No",click:function(){"function"==typeof a&&a(),$(this).dialog("close")}}],close:function(e,t){$(this).remove()}})}validateForm(e){let t=!0;return e.find("input").each(function(){$(this).prop("required")&&!$(this).val()&&(t=!1)}),t}syntaxErrorBanner(e){$("body").prepend('<div class="card text-white bg-danger m-3"><div class="card-header">Syntax Error</div><div class="card-body"><p class="card-text">'+e+"</p></div></div>")}}class KyteNav{constructor(e,t,i=null,a=null,s=null,l="/app/"){this.selector=e,this.nav_struct=t,this.logo=i,this.title=a,this.active=s,this.link=l}create(){let e='		<div class="container-fluid">			<a href="'+this.link+'" class="navbar-brand">'+(this.logo?'<img src="'+this.logo+'" style="height: 45px;" class="me-2 rounded">':"")+(this.title?this.title:"")+'</a>			<button data-bs-toggle="collapse" class="navbar-toggler" type="button" data-bs-target="#navcol-1" aria-controls="#navcol-1" aria-expanded="false" aria-label="Toggle navigation">				<span class="navbar-toggler-icon"></span>			</button>			<div class="collapse navbar-collapse" id="navcol-1">',t=0;this.nav_struct.forEach(i=>{e+=0==t?'<ul class="navbar-nav mx-auto">':'<ul class="navbar-nav">',t++,i.forEach(t=>{t.dropdown?(e+='<li class="nav-item dropdown">',e+='<a class="nav-link dropdown-toggle '+t.class+'" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">'+(t.faicon?'<i class="'+t.faicon+' me-2"></i>':"")+"<span>"+t.label+"</span></a>",e+='<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">',t.items.forEach(t=>{e+='<li><a class="dropdown-item '+t.class+'" '+(t.logout?'id="logout" ':"")+(t.href?'href="'+t.href+'"':'href="#"')+">"+(t.faicon?'<i class="'+t.faicon+' me-2"></i>':"")+"<span>"+t.label+"</span></a></li>"}),e+="</ul>",e+="</li>"):e+='<li class="nav-item"><a '+(t.logout?'id="logout" ':"")+'class="nav-link'+(t.label==this.active?" active":"")+" "+t.class+'" '+(t.href?'href="'+t.href+'"':'href="#"')+">"+(t.faicon?'<i class="'+t.faicon+' me-2"></i>':"")+"<span>"+t.label+"</span></a></li>"}),e+="</ul>"}),e+="			</div>		</div>",$(this.selector).html(e)}}class KyteSidenav{constructor(e,t,i){this.selector=e,this.nav_struct=t,this.default_page_selector=i}create(){if($(this.selector).length){let e='<ul class="nav nav-pills flex-column mb-auto" id="sidebar-nav">';this.nav_struct.forEach(t=>{($(t.selector).length||t.href)&&(e+='<li class="nav-item">',e+="<a "+($(t.selector).length?'id="'+t.selector.replace("#","")+'-nav-link" ':"")+'href="'+(t.href?t.href:t.selector)+'" class="nav-link text-dark me-2"><i class="'+t.faicon+' me-2"></i><span>'+t.label+"</span></a>",e+="</li>")}),e+="</ul>",$(this.selector).html(e)}}bind(e=null){let t=this,i=location.hash;$(i=""==i?this.default_page_selector:i).removeClass("d-none"),$(i+"-nav-link").addClass("active"),this.nav_struct.forEach(i=>{$(i.selector+"-nav-link").click(function(a){history.pushState({},"",this.href),a.preventDefault(),$(i.selector+"-nav-link").addClass("active"),$(i.selector).removeClass("d-none"),"function"==typeof e&&e(i),t.nav_struct.forEach(e=>{e.selector!=i.selector&&($(e.selector+"-nav-link").removeClass("active"),$(e.selector).addClass("d-none"))})})})}}class KyteTable{constructor(e,t,i,a,s=!0,l=[],o=!1,n=!1,d=!1,r=null,c=null,u=null){this.api=e,this.model=i,this.httpHeaders=[],this.loaded=!1,this.table=null,this.selector=t,this.lang="https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/English.json",this.searching=s,this.columnDefs=a,this.order=l,this.actionEdit=o,this.editForm=null,this.actionDelete=n,this.actionView=d,this.viewTarget=r,this.targetBlank=!1,this.rowCallBack=c,this.initComplete=u,this.processing=!0,this.serverside=!0,this.customAction=null,this.customActionButton=null,this.deleteDisplayHook=null,this.editDisplayHook=null,this.page_idx=1,this.pageLength=50}init(){let e=this;if(!this.loaded){let t="<thead><tr>",i=0;if(e.columnDefs.forEach(function(a){t+='<th class="'+a.data.replace(/\./g,"_")+'">'+a.label+"</th>",delete e.columnDefs[i].label,i++}),e.actionEdit||e.actionDelete||e.customAction&&e.customAction.length>0||e.customActionButton&&e.customActionButton.length>0){t+="<th></th>",e.actionDelete&&e.selector.on("click",".delete",function(t){t.preventDefault();let i=e.table.row($(this).parents("tr")),a=i.data();e.api.confirm("Delete","Are you sure you wish to delete?",function(){e.api.delete(e.model.name,"id",a.id,[],function(){i.remove().draw()},function(){alert("Unable to delete. Please try again later.")})})}),e.customAction&&e.customAction.length>0&&e.customAction.forEach(t=>{e.selector.on("click","."+t.className,function(i){i.preventDefault();let a=e.table.row($(this).parents("tr")).data();t.callback(a,e.model.name)})}),e.customActionButton&&e.customActionButton.length>0&&e.customActionButton.forEach(t=>{e.selector.on("click","."+t.className,function(i){i.preventDefault();let a=e.table.row($(this).parents("tr")).data();t.callback(a,e.model.name)})});let a=e.columnDefs.length;e.columnDefs.push({targets:a,sortable:!1,data:"",className:"text-right row-actions",render:function(t,i,a,s){let l="";e.customActionButton&&e.customActionButton.length>0&&e.customActionButton.forEach(e=>{e.className&&e.label&&"function"==typeof e.callback&&(l+='<a class="me-3 '+e.className+' btn btn-small btn-outline-primary" href="#">'+(e.faicon?'<i class="'+e.faicon+'"></i> ':"")+e.label+"</a>")});let o=e.api.makeid(8);if(e.actionEdit||e.actionDelete||e.customAction&&e.customAction.length>0){let n="";if(l+='<div class="dropdown d-inline-block"><button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dataTableDropdown'+o+'" data-bs-toggle="dropdown" aria-expanded="false"></button><ul class="dropdown-menu" aria-labelledby="dataTableDropdown'+o+'">',e.actionEdit){let d='<li><a class="dropdown-item edit" href="#"><i class="fas fa-edit"></i> Edit</a></li>';"function"==typeof e.editDisplayHook&&(d=e.editDisplayHook(a,e.model.name,d)),n+=d}if(e.actionDelete){let r='<li><a class="dropdown-item delete" href="#"><i class="fas fa-trash-alt"></i> Delete</a></li>';"function"==typeof e.deleteDisplayHook&&(r=e.deleteDisplayHook(a,e.model.name,r)),n+=r}e.customAction&&e.customAction.length>0&&(n+='<li><hr class="dropdown-divider"></li>',e.customAction.forEach(e=>{e.className&&e.label&&"function"==typeof e.callback&&(n+='<li><a class="dropdown-item '+e.className+'" href="#">'+(e.faicon?'<i class="'+e.faicon+'"></i> ':"")+e.label+"</a></li>")})),l+=n,l+="</ul></div>"}return l}})}e.actionView&&(e.selector.on("click","tbody tr",function(t){t.preventDefault();let i=e.table.row(this).data();if(e.viewTarget){let a=encodeURIComponent(btoa(JSON.stringify({model:e.model.name,idx:i[e.actionView]})));e.targetBlank?window.open(e.viewTarget+"?request="+a,"_blank").focus():location.href=e.viewTarget+"?request="+a}}),e.selector.on("click","tbody td.row-actions",function(e){e.stopPropagation()})),t+="</tr></thead><tbody></tbody>",e.selector.append(t),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&e.selector.addClass("table-dark"),e.table=e.selector.DataTable({processing:e.processing,serverSide:e.serverside,responsive:!0,language:{url:e.lang},columnDefs:e.columnDefs,order:e.order,pageLength:e.pageLength,ajax:function(t,i,a){let s=[];if(e.columnDefs.forEach(e=>{s.push(e.data)}),e.serverside&&e.processing&&(e.httpHeaders.push({name:"x-kyte-draw",value:t.draw}),e.httpHeaders.push({name:"x-kyte-page-size",value:t.length}),e.httpHeaders.push({name:"x-kyte-page-idx",value:Math.ceil((t.start+1)/t.length)}),e.httpHeaders.push({name:"x-kyte-page-search-value",value:t.search.value?btoa(encodeURIComponent(t.search.value)):""}),e.httpHeaders.push({name:"x-kyte-page-search-fields",value:s.join().replace(/,\s*$/,"")}),t.order.length>0)){let l=s[t.order[0].column],o=t.order[0].dir;e.httpHeaders.push({name:"x-kyte-page-order-col",value:l||""}),e.httpHeaders.push({name:"x-kyte-page-order-dir",value:o||""})}e.api.get(e.model.name,e.model.field,e.model.value,e.httpHeaders,function(e){i({draw:parseInt(e.draw),recordsTotal:parseInt(e.total_count),recordsFiltered:parseInt(e.total_filtered),data:e.data})},function(){alert("Unable to load data")})},rowCallback:e.rowCallBack,initComplete:function(){$(this.api().table().container()).find('input[type="search"]').parent().wrap("<form>").parent().attr("autocomplete","off"),"function"==typeof e.initComplete&&e.initComplete()}}),e.loaded=!0,e.actionView&&(e.selector.find("tbody").addClass("row-pointer-hand"),$("<style>tbody.row-pointer-hand tr { cursor: pointer } tbody td {vertical-align: middle !important;}</style>").appendTo("body"))}}bindEdit(e){var t=this;t.editForm=e,this.actionEdit&&this.selector.on("click",".edit",function(e){e.preventDefault(),t.editForm.selectedRow=t.table.row($(this).parents("tr"));let i=t.editForm.selectedRow.data();t.editForm.setID(i.id),t.editForm.showModal()})}}class KyteForm{constructor(e,t,i,a,s,l="Form",o=null,n=!1,d=null,r=null,c=null){this.api=e,this.model=i,this.modal=n,this.modalButton=d,this.KyteTable=o,this.title=l,this.hiddenFields=a,this.elements=s,this.id,this.submitButton="Submit",this.fileUploadField=null,this.itemized=!1,this.externalChildData=!1,this.success=r,this.fail=c,this.loaded=!1,this.selector=t,this.selectedRow=null,this.editOnlyMode=!1,this.isValid=!0,this.validate=null}init(){if(!this.loaded){this.id=this.makeID(8);let e="",t=this;this.modal&&(this.modalButton&&this.modalButton.on("click",function(e){e.stopPropagation(),e.preventDefault(),$("#modal_"+t.model+"_"+t.id).modal("show")}),e+=`
<div class="modal fade" id="modal_${this.model}_${this.id}" tabindex="-1" role="dialog" aria-labelledby="modal_${this.model}_${this.id}" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header text-center">
				<h4 class="modal-title w-100 font-weight-bold">${this.title}</h4>
				<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			</div>
			<div class="modal-body mx-3">`),e+=`
				<div id="${this.model}_${this.id}_modal-loader" class="modal" style="background: white; opacity: 0.6;" data-backdrop="static" data-keyboard="false" tabindex="-1">
					<div class="modal-dialog modal-sm h-100 d-flex">
						<div class="mx-auto align-self-center" style="width: 48px">
							<div class="spinner-wrapper text-center fa-6x"><span class="fas fa-sync fa-spin"></span></div>
						</div>
					</div>
				</div>
				<form novalidate="novalidate" class="needs-validation" id="form_${this.model}_${this.id}">
					<div class="error-msg"></div>`,this.hiddenFields&&this.hiddenFields.forEach(function(i){e+=`<input type="hidden" id="${void 0!==i.id?i.id:`form_${t.model}_${t.id}_${i.name}`}" name="${i.name}" value="${i.value}">`}),this.elements.forEach(function(i){e+='<div class="row my-2">',i.forEach(function(i){e+=`<div class="col-sm${void 0!==i.col?"-"+i.col:""}"><div class="form-group">`;let a=void 0!==i.id?i.id:`form_${t.model}_${t.id}_${i.field}`;if(i.label&&(e+=`<label for="${a}">${i.label}</label>`),"select"==i.type){if(e+=`<select id="${a}" class="form-select" name="${i.field}"${i.required?' required="required"':""}>`,i.placeholder&&(e+=`<option selected="selected" disabled>${i.placeholder}</option>`),!i.option.ajax)for(var s in i.option.data)i.option.data.hasOwnProperty(s)&&(e+=`<option value="${s}">${i.option.data[s]}</option>`);e+="</select>"}else"textarea"==i.type?e+=`<textarea style="width:100%" id="${a}" class="form-control" name="${i.field}"${i.required?' required="required"':""}${void 0!==i.placeholder?' placeholder="'+i.placeholder+'"':""} ${void 0!==i.maxlength?' maxlength="'+i.maxlength+'"':""}></textarea>`:"file"==i.type?(e+=`<input type="file" id="${a}" name="${i.field}" class="form-control" data-max-file-size="2M" accept="image/*;capture=camera"${i.required?' required="required"':""} />`,t.fileUploadField=a):e+=`<input type="${i.type}" id="${a}" class="form-control" name="${i.field}"${i.required?' required="required"':""}${void 0!==i.placeholder?' placeholder="'+i.placeholder+'"':""}${void 0!==i.value?' value="'+i.value+'"':""}${void 0!==i.readonly?" readonly":""} ${void 0!==i.maxlength?' maxlength="'+i.maxlength+'"':""}/>`;"function"==typeof i.click&&$("body").on("click",`#${a}`,function(e){i.click(t,$(`#${a}`),e)}),"function"==typeof i.change&&$("body").on("change",`#${a}`,function(e){i.change(t,$(`#${a}`),e)}),e+="</div></div>"}),e+="</div>"}),this.itemized&&(e+=`<hr><h6>${this.itemized.title}</h6><div class="row">`,this.itemized.fields.forEach(function(t){e+=`<div class="col">${t.label}</div>`}),e+=`<div class="col"></div></div><div id="itemized_${this.model}_${this.id}"></div><div class="row my-4"><div class="col text-right"><a href="#" class="itemized-add-item btn btn-small btn-outline-secondary">Add</a></div></div><hr>`),e+=`<div class="row my-4"><div class="col text-center"><input type="submit" name="submit" value="${t.submitButton}" class="btn btn-primary btn-medium d-sm-inline-block"></div></div>`,e+="</form>",this.modal&&(e+="</div></div></div></div>"),"string"==typeof this.selector&&($("body").append(`<div id="${this.selector}"></div>`),this.selector=$(this.selector)),this.selector.append(e),this.reloadAjax(),$(`#form_${this.model}_${this.id}`).submit(function(e){var i=$(this);if(e.preventDefault(),t.isValid=!0,i.find("input").each(function(){$(this).prop("required")&&!$(this).val()?(t.isValid=!1,$(this).addClass("is-invalid"),$(this).removeClass("is-valid")):($(this).addClass("is-valid"),$(this).removeClass("is-invalid"))}),i.find("textarea").each(function(){$(this).prop("required")&&!$(this).val()?(t.isValid=!1,$(this).addClass("is-invalid"),$(this).removeClass("is-valid")):($(this).addClass("is-valid"),$(this).removeClass("is-invalid"))}),"function"==typeof t.validate&&t.validate(t),t.isValid){$("#"+t.model+"_"+t.id+"_modal-loader").modal("show");let a=t.editOnlyMode?t.editOnlyMode:i.data("idx");if(a>0)t.api.put(t.model,"id",a,null,i.serialize(),[],function(e){$("#"+t.model+"_"+t.id+"_modal-loader").modal("hide"),"function"==typeof t.success&&t.success(e),t.KyteTable&&1==e.data.length&&t.selectedRow.data(e.data[0]).draw(),$(`#form_${t.model}_${t.id}`).trigger("reset"),t.hideModal()},function(e){$("#"+t.model+"_"+t.id+"_modal-loader").modal("hide"),t.appendErrorMessage(e),"function"==typeof t.success&&t.fail(e)});else{if(t.fileUploadField){let s=document.getElementById(t.fileUploadField).files[0];s&&i.append(`<input id="filename" type="hidden" name="filename" value="${s.name}" />`)}t.api.post(t.model,null,i.serialize(),[],function(e){if(t.KyteTable&&e.data.forEach(function(e){t.KyteTable.table.row.add(e).draw()}),t.fileUploadField&&e.data[0].s3endpoint){$("#filename").remove();let i=e.data[0].id,a=document.getElementById(t.fileUploadField).files[0],s=new FormData;s.append("acl","private"),s.append("key",e.data[0].key),s.append("policy",e.data[0].policy),s.append("x-amz-algorithm","AWS4-HMAC-SHA256"),s.append("x-amz-credential",e.data[0].credential),s.append("x-amz-date",e.data[0].date),s.append("x-amz-signature",e.data[0].signature),s.append("file",a),$.ajax({url:e.data[0].s3endpoint,type:"post",data:s,dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(i){"function"==typeof t.success&&t.success(e),$(`#${t.model}_${t.id}_modal-loader`).modal("hide"),$(`#form_${t.model}_${t.id}`).trigger("reset"),t.hideModal()},error:function(e){$(`#${t.model}_${t.id}_modal-loader`).modal("hide"),t.appendErrorMessage(e),"function"==typeof t.fail&&t.fail(e),k.delete(t.model,"id",i,[])}})}else"function"==typeof t.success&&t.success(e),$(`#form_${t.model}_${t.id}`).trigger("reset"),$(`#${t.model}_${t.id}_modal-loader`).modal("hide"),t.hideModal()},function(e){$(`#${t.model}_${t.id}_modal-loader`).modal("hide"),t.appendErrorMessage(e),"function"==typeof t.fail&&t.fail(e)})}}}),this.modal&&($("#modal_"+this.model+"_"+this.id).on("hidden.bs.modal",function(e){if(e.target.id=="modal_"+t.model+"_"+t.id){var i=$(`#form_${t.model}_${t.id}`);i.data("idx",""),i.data("row",""),i.find(".error-msg").html(""),i.find("input").each(function(){$(this).removeClass("is-invalid"),$(this).removeClass("is-valid")}),i.find('input[type="text"').each(function(){$(this).val("")}),i.find('input[type="email"').each(function(){$(this).val("")}),i.find('input[type="password"').each(function(){$(this).val("")}),i.find('input[type="tel"').each(function(){$(this).val("")}),i.find('input[type="checkbox"').each(function(){$(this).prop("checked",!1)}),i.find('input[type="radio"').each(function(){$(this).prop("checked",!1)}),i.find("select").each(function(){$(this).prop("selectedIndex",0)}),i.find("textarea").each(function(){$(this).val("")}),t.itemized&&$("#itemized_"+t.model+"_"+t.id).html(""),$(`#form_${t.model}_${t.id}`).trigger("reset")}}),$("#modal_"+this.model+"_"+this.id).on("shown.bs.modal",function(e){if(e.target.id=="modal_"+t.model+"_"+t.id){var i=$(`#form_${t.model}_${t.id}`);let a=t.editOnlyMode?t.editOnlyMode:i.data("idx");a&&($(`#${t.model}_${t.id}_modal-loader`).modal("show"),t.loadFormData(a,function(){$(`#${t.model}_${t.id}_modal-loader`).modal("hide")},function(){$(`#${t.model}_${t.id}_modal-loader`).modal("hide"),t.hideModal(),console.error("Unable to load form. Please try again later")}))}})),this.itemized&&($(`#form_${this.model}_${this.id}`).on("click",".itemized-add-item",function(e){var i=t.makeID(8);e.preventDefault();let a='<div class="row itemized-row my-3">';t.itemized.fields.forEach(function(e){if(a+='<div class="col"><div class="form-group">',"select"==e.type){if(a+=`<select id="${e.option.data_model_name}_${e.option.data_model_value}_${i}" id="itemized_${t.model}_${t.id}_${e.name}" class="form-select" name="${e.name}"${e.required?' required="required"':""}>`,!e.option.ajax)for(var s in e.option.data)e.option.data.hasOwnProperty(s)&&(a+=`<option value="${s}">${e.option.data[s]}</option>`);a+="</select>"}else"textarea"==e.type?a+=`<textarea style="width:100%" id="itemized_${t.model}_${t.id}_${e.name}" class="form-control" name="${e.name}"${e.required?' required="required"':""}${void 0!==e.placeholder?' placeholder="'+e.placeholder+'"':""}></textarea>`:a+=`<input type="${e.type}" id="itemized_${t.model}_${t.id}_${e.name}" class="form-control" name="${e.name}${e.required?' required="required"':""}${void 0!==e.placeholder?' placeholder="'+e.placeholder+'"':""}${void 0!==e.readonly?" readonly":""}>`;a+="</div></div>"}),a+='<div class="col-2 text-right"><a href="#" class="itemized-delete-item btn btn-small btn-outline-danger">remove</a></div></div>',$(`#itemized_${t.model}_${t.id}`).append(a),t.itemized.fields.forEach(function(e){"select"==e.type&&e.option.ajax&&t.api.get(e.option.data_model_name,e.option.data_model_field,e.option.data_model_value,[],function(t){t.data.forEach(function(t){let a="";e.option.data_model_attributes.forEach(function(e){if(t[e])a+=t[e]+" ";else{let i=e.split(".");i.length>=2?a+=t[i[0]][i[1]]+" ":a+=e+" "}}),$(`#${e.option.data_model_name}_${e.option.data_model_value}_${i}`).append(`<option value="${t.id}">${a}</option>`)})})})}),$(`#form_${this.model}_${this.id}`).on("click",".itemized-delete-item",function(e){e.preventDefault(),$(this).closest(".itemized-row").remove()})),this.loaded=!0}}appendErrorMessage(e){$(`#form_${this.model}_${this.id} .error-msg`).append(`<div class="alert alert-danger" role="alert">${e}</div>`)}clearErrorMessage(){$(`#form_${this.model}_${this.id} .error-msg`).html("")}showModal(){this.modal&&$(`#modal_${this.model}_${this.id}`).modal("show")}hideModal(){this.modal&&$(`#modal_${this.model}_${this.id}`).modal("hide")}loadFormData(e,t=null,i=null){var a=this,s=a.externalChildData?[{name:"x-kyte-get-externaltables",value:"true"}]:[];a.api.get(a.model,"id",e,s,function(e){if(a.elements.forEach(function(t){t.forEach(function(t){let i=void 0!==t.id?t.id:`form_${a.model}_${a.id}_${t.field}`;if("object"==typeof e.data[0][t.field]&&null!==e.data[0][t.field])$(`#${i}`).val(e.data[0][t.field].id).change();else{if("date"===t.type){var s=e.data[0][t.field].replace(/\//g,"-");$(`#${i}`).val(s)}else $(`#${i}`).val(e.data[0][t.field]);$(`#${i}`).change()}})}),a.itemized){var i=e.data[0].ExternalTables.LineItem,s=0;i.forEach(function(e){var t=a.makeID(8);let i='<div class="row itemized-row my-3">';a.itemized.fields.forEach(function(t){var l=void 0===e[t.name]?"":e[t.name];if(i+='<div class="col"><div class="form-group">',"select"==t.type){if(i+=`<select id="itemized_${a.model}_${a.id}_${t.name}[${s}]" class="form-select" name="${t.name}" value="${l}"${t.required?' required="required"':""}>`,!t.option.ajax)for(var o in t.option.data)t.option.data.hasOwnProperty(o)&&(i+=`<option value="${o}">${t.option.data[o]}</option>`);i+="</select>"}else"textarea"==t.type?i+=`<textarea style="width:100%" id="itemized_${a.model}_${a.id}_${t.name}[${s}]" class="form-control" name="${t.name}" value="${l}"${t.required?' required="required"':""}${void 0!==t.placeholder?' placeholder="'+t.placeholder+'"':""}></textarea>`:i+=`<input type="${t.type}" id="itemized_${a.model}_${a.id}_${t.name}[${s}]" class="form-control" name="${t.name}" value="${l=t.date?l.replace(/\//g,"-"):l}"${t.required?'required="required"':""}${void 0!==t.placeholder?' placeholder="'+t.placeholder+'"':""}${void 0!==t.readonly?" readonly":""}>`;i+="</div></div>"}),i+='<div class="col-2 text-right"><a href="#" class="itemized-delete-item btn btn-small btn-outline-danger">remove</a></div></div>',$(`#itemized_${a.model}_${a.id}`).append(i),a.itemized.fields.forEach(function(e){"select"==e.type&&e.option.ajax&&a.api.get(e.option.data_model_name,e.option.data_model_field,e.option.data_model_value,[],function(i){i.data.forEach(function(i){let a="";e.option.data_model_attributes.forEach(function(e){if(i[e])a+=i[e]+" ";else{let t=e.split(".");t.length>=2?a+=i[t[0]][t[1]]+" ":a+=e+" "}}),$(`#${e.option.data_model_name}_${e.option.data_model_value}_${t}`).append(`<option value="${i[e.option.data_model_value]}">${a}</option>`)})})}),s++})}"function"==typeof t&&t()},function(){"function"==typeof t&&t()})}reloadAjax(){let e=this;this.elements.forEach(function(t){t.forEach(function(t){let i=void 0!==t.id?t.id:`form_${e.model}_${e.id}_${t.field}`;"select"==t.type&&t.option.ajax&&($(`#${i}`).html(""),t.placeholder&&$(`#${i}`).append(`<option selected="selected" disabled>${t.placeholder}</option>`),e.api.get(t.option.data_model_name,t.option.data_model_field,t.option.data_model_value,[],function(e){e.data.forEach(function(e){let a="";t.option.data_model_attributes.forEach(function(t){if(e[t])a+=e[t]+" ";else{let i=t.split(".");i.length>=2?a+=e[i[0]][i[1]]+" ":a+=t+" "}}),$(`#${i}`).append(`<option value="${e.id}"${e[t.option.data_model_default_field]==t.option.data_model_default_value?' selected="selected"':""}>${a}</option>`)})},function(){alert("Unable to load data")}))})})}setID(e){$(`#form_${this.model}_${this.id}`).data("idx",e)}getID(){return $(`#form_${this.model}_${this.id}`).data("idx")}makeID(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=i.length,s=0;s<e;s++)t+=i.charAt(Math.floor(Math.random()*a));return t}}class KyteCalendar{constructor(e){this.selector=e,this.Days=["Su","Mo","Tu","We","Th","Fr","Sa"],this.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.selectedDate=null,this.selectedEndDate=null,this.callback=null,this.date=new Date,this.rowMonths=1,this.colMonths=0,this.selectedActiveClass="calendar-date-active",this.selectedEndActiveClass="calendar-date-active",this.fieldInFocus=null}init(){let e=this,t='<div class="kyte-calendar">';this.colMonths=$(this.selector).data("colMonths"),this.rowMonths=$(this.selector).data("rowMonths"),t+='<div class="d-flex justify-content-between mb-2"><a href="#" class="calendar-back"><i class="fas fa-arrow-alt-circle-left fa-3x"></i></a><a href="#" class="calendar-forward"><i class="fas fa-arrow-alt-circle-right fa-3x"></i></a></div>',t+='<div class="row kyte-calendar-row">',t+=this.generateRow(function(e,t){return 0==e&&0==t?0:1}),t+="</div></div>",$(this.selector).html(t),$(".kyte-calendar").on("click",".calendar-forward",function(t){t.preventDefault(),t.stopPropagation(),e.date.setMonth(e.date.getMonth()+e.colMonths*e.rowMonths*2),$(".kyte-calendar-row").html(e.generateRow())}),$(".kyte-calendar").on("click",".calendar-back",function(t){t.preventDefault(),t.stopPropagation(),$(".kyte-calendar-row").html(e.generateRow())}),$(".kyte-calendar").on("click",".calendar-date-content",function(t){t.preventDefault(),t.stopPropagation();let i=$(this).data("calendarYear"),a=$(this).data("calendarMonth"),s=$(this).data("calendarDate");$(".calendar-date-content").removeClass(e.selectedActiveClass),$(".calendar-date-content").removeClass(e.selectedEndActiveClass);let l=new Date(i,a,s);"range"==$(e.selector).data("selectionType")?e.fieldInFocus?(console.log("test"),console.log(e.fieldInFocus.data("date-target")),"start"==e.fieldInFocus.data("date-target")?(e.selectedDate=l,e.selectedDate>e.selectedEndDate&&(e.selectedEndDate=null)):(e.selectedEndDate=l,e.selectedDate>e.selectedEndDate&&(e.selectedDate=null)),e.fieldInFocus=null):null==e.selectedDate?e.selectedDate=l:e.selectedDate>l?(e.selectedDate=l,e.selectedEndDate=null):null==e.selectedEndDate?e.selectedEndDate=l:(e.selectedDate=l,e.selectedEndDate=null):e.selectedDate=new Date(i,a,s),null!=e.selectedEndDate&&$(".calendar-element-"+e.selectedEndDate.getFullYear()+"-"+e.selectedEndDate.getMonth()+"-"+e.selectedEndDate.getDate()).addClass(e.selectedEndActiveClass),null!=e.selectedDate&&$(".calendar-element-"+e.selectedDate.getFullYear()+"-"+e.selectedDate.getMonth()+"-"+e.selectedDate.getDate()).addClass(e.selectedActiveClass),"function"==typeof e.callback&&e.callback(e.selectedDate,e.selectedEndDate)})}updateSelectedDate(e){if(null==e||""==e)this.selectedDate=null;else{let t=new Date(e);this.selectedDate=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),this.selectedDate>this.selectedEndDate&&(this.selectedEndDate=null)}this.fieldInFocus=null,this.redraw()}updateSelectedEndDate(e){if(null==e||""==e)this.selectedEndDate=null;else{let t=new Date(e);this.selectedEndDate=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),this.selectedEndDate<this.selectedDate&&(this.selectedDate=null)}this.fieldInFocus=null,this.redraw()}redraw(){this.date.setMonth(this.date.getMonth()+this.colMonths*this.rowMonths),$(".kyte-calendar-row").html(this.generateRow())}generateRow(e){if(this.rowMonths<1||this.rowMonths>3){console.error("Invalid option for number of rows to display. Please pick between 1 and 3.");return}if(this.colMonths<1||this.colMonths>3){console.error("Invalid option for number of months to display per col. Please pick between 1 and 3.");return}if("function"==typeof e){if(!Number.isInteger(e(1))){console.error("Modifier does not return an integer. Must return an integer.");return}}else e=function(e){return 1};let t="";this.rowMonths>1&&(t+='<div class="col">');let i=[];for(let a=0;a<this.rowMonths;a++){let s="";this.rowMonths>1&&(s+='<div class="row mb-2">');let l=[];for(let o=0;o<this.colMonths;o++){this.date.setMonth(this.date.getMonth()-e(o,a));let n=this.generateCalendar(this.date);l.push('<div class="col-lg-'+12/this.colMonths+' mb-2 mb-lg-0 px-1">'+n+"</div>")}s+=l.reverse().join(""),this.rowMonths>1&&(s+="</div>"),i.push(s)}return t+=i.reverse().join(""),this.rowMonths>1&&(t+="</div>"),t}generateCalendar(e){let t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),i=new Date(e.getFullYear(),e.getMonth(),1),a=[],s=[],l=0;for(a.push('<div class="row"><div class="col"><div class="calendar-month-label">'+this.Months[e.getMonth()]+" "+e.getFullYear()+"</div></div></div>");l<7;l++)s.push('<div class="col"><div class="calendar-day-of-week">'+this.Days[l]+"</div></div>");a.push('<div class="row">'+s.join("")+"</div>"),s=[],l=0;let o=i.getDay();for(;l<o;l++)s.push('<div class="col"><div class="calendar-date-square"></div></div>');for(let n=1;n<=t;n++){i.setDate(n);let d=!1,r=!1;this.selectedDate&&this.selectedDate.getTime()===i.getTime()&&(d=!0),this.selectedEndDate&&this.selectedEndDate.getTime()===i.getTime()&&(r=!0),l%7==0&&(a.push('<div class="row">'+s.join("")+"</div>"),s=[],l=0),s.push('<div class="col"><div class="calendar-date-square"><a href="#" data-calendar-month="'+e.getMonth()+'" data-calendar-year="'+e.getFullYear()+'" data-calendar-date="'+n+'" data-calendar-day="'+this.Days[l]+'" class="'+(d?this.selectedActiveClass+" ":"")+(r?this.selectedEndActiveClass+" ":"")+"calendar-date-content calendar-element-"+e.getFullYear()+"-"+e.getMonth()+"-"+n+' align-items-center justify-content-center d-flex"><span class="d-flex-column">'+n+"</span></a></div></div>"),l++}for(;l<7;l++)s.push('<div class="col"><div class="calendar-date-square"></div></div>');return a.push('<div class="row">'+s.join("")+"</div>"),'<div class="kyte-calendar-wrapper">'+a.join("")+"</div>"}}class KytePasswordRequirement{constructor(e,t,i,a){this.api=e,this.selector=t,this.passwordField=i,this.confirmField=a,this.minLength=8,this.lengthText="Minimum length of "+this.minLength,this.lowerCaseText="At least one lower case letter",this.upperCaseText="At least one upper case letter",this.numberText="At least one number",this.symbolText="At least one symbol",this.reqLength=!0,this.reqLowerCase=!0,this.reqUpperCase=!0,this.reqNumber=!0,this.reqSymbol=!0,this.valid=!1}init(){let e=this;this.selector.html("");let t='<ul class="fa-ul">';this.reqLength&&(t+='<li class="validate-length"><i class="fa-li far fa-circle"></i> '+this.lengthText+"</li>"),this.reqLowerCase&&(t+='<li class="validate-small"><i class="fa-li far fa-circle"></i> '+this.lowerCaseText+"</li>"),this.reqUpperCase&&(t+='<li class="validate-large"><i class="fa-li far fa-circle"></i> '+this.upperCaseText+"</li>"),this.reqNumber&&(t+='<li class="validate-number"><i class="fa-li far fa-circle"></i> '+this.numberText+"</li>"),this.reqSymbol&&(t+='<li class="validate-symbol"><i class="fa-li far fa-circle"></i> '+this.symbolText+"</li>"),t+="</ul>",this.selector.append(t),this.passwordField.on("keyup",function(){this.valid=e.validatePassword()})}validatePassword(){var e=this.passwordField.val();let t=!0;return e||(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-length i").removeClass("fa-circle"),$("ul li.validate-length i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-length i").removeClass("text-success").addClass("text-danger"),$("ul li.validate-small i").removeClass("fa-circle"),$("ul li.validate-small i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-small i").removeClass("text-success").addClass("text-danger"),$("ul li.validate-large i").removeClass("fa-circle"),$("ul li.validate-large i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-large i").removeClass("text-success").addClass("text-danger"),$("ul li.validate-number i").removeClass("fa-circle"),$("ul li.validate-number i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-number i").removeClass("text-success").addClass("text-danger"),$("ul li.validate-symbol i").removeClass("fa-circle"),$("ul li.validate-symbol i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-symbol i").removeClass("text-success").addClass("text-danger"),t=!1),this.reqLength&&(e.length<8?(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-length i").removeClass("fa-circle"),$("ul li.validate-length i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-length i").removeClass("text-success").addClass("text-danger"),t=!1):(this.passwordField.removeClass("is-invalid").addClass("is-valid"),$("ul li.validate-length i").removeClass("fa-circle"),$("ul li.validate-length i").removeClass("fa-times-circle").addClass("fa-check-circle"),$("ul li.validate-length i").removeClass("text-danger").addClass("text-success"))),this.reqLowerCase&&(e.match(/[a-z]/)?(this.passwordField.removeClass("is-invalid").addClass("is-valid"),$("ul li.validate-small i").removeClass("fa-circle"),$("ul li.validate-small i").removeClass("fa-times-circle").addClass("fa-check-circle"),$("ul li.validate-small i").removeClass("text-danger").addClass("text-success")):(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-small i").removeClass("fa-circle"),$("ul li.validate-small i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-small i").removeClass("text-success").addClass("text-danger"),t=!1)),this.reqUpperCase&&(e.match(/[A-Z]/)?(this.passwordField.removeClass("is-invalid").addClass("is-valid"),$("ul li.validate-large i").removeClass("fa-circle"),$("ul li.validate-large i").removeClass("fa-times-circle").addClass("fa-check-circle"),$("ul li.validate-large i").removeClass("text-danger").addClass("text-success")):(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-large i").removeClass("fa-circle"),$("ul li.validate-large i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-large i").removeClass("text-success").addClass("text-danger"),t=!1)),this.reqNumber&&(e.match(/\d/)?(this.passwordField.removeClass("is-invalid").addClass("is-valid"),$("ul li.validate-number i").removeClass("fa-circle"),$("ul li.validate-number i").removeClass("fa-times-circle").addClass("fa-check-circle"),$("ul li.validate-number i").removeClass("text-danger").addClass("text-success")):(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-number i").removeClass("fa-circle"),$("ul li.validate-number i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-number i").removeClass("text-success").addClass("text-danger"),t=!1)),this.reqSymbol&&(e.match(/[@$!%*#?&]/)?(this.passwordField.removeClass("is-invalid").addClass("is-valid"),$("ul li.validate-symbol i").removeClass("fa-circle"),$("ul li.validate-symbol i").removeClass("fa-times-circle").addClass("fa-check-circle"),$("ul li.validate-symbol i").removeClass("text-danger").addClass("text-success")):(this.passwordField.removeClass("is-valid").addClass("is-invalid"),$("ul li.validate-symbol i").removeClass("fa-circle"),$("ul li.validate-symbol i").removeClass("fa-check-circle").addClass("fa-times-circle"),$("ul li.validate-symbol i").removeClass("text-success").addClass("text-danger"),t=!1)),t}}
